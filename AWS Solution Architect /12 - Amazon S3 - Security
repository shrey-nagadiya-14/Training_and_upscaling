================================================================================
                    AMAZON S3 SECURITY - COMPLETE GUIDE
                         Slide-wise Explanations
================================================================================

================================================================================
SLIDE 1: AMAZON S3 â€“ SECURITY (TITLE)
================================================================================

Overview:
---------
This section covers comprehensive Amazon S3 security features including:
â€¢ Object Encryption (SSE-S3, SSE-KMS, SSE-C, Client-Side)
â€¢ Encryption in Transit (SSL/TLS)
â€¢ CORS (Cross-Origin Resource Sharing)
â€¢ MFA Delete
â€¢ Access Logs
â€¢ Pre-Signed URLs
â€¢ Glacier Vault Lock & Object Lock
â€¢ Access Points
â€¢ S3 Object Lambda

================================================================================
SLIDE 2: AMAZON S3 â€“ OBJECT ENCRYPTION
================================================================================

You can encrypt objects in S3 buckets using one of 4 methods:

1. SERVER-SIDE ENCRYPTION (SSE):
--------------------------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ A) SSE-S3 (Server-Side Encryption with Amazon S3-Managed Keys)             â”‚
â”‚    â€¢ Enabled by DEFAULT                                                     â”‚
â”‚    â€¢ Encrypts S3 objects using keys handled, managed, and owned by AWS     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ B) SSE-KMS (Server-Side Encryption with KMS Keys stored in AWS KMS)        â”‚
â”‚    â€¢ Leverage AWS Key Management Service (AWS KMS) to manage encryption    â”‚
â”‚      keys                                                                   â”‚
â”‚    â€¢ User control + audit key usage using CloudTrail                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ C) SSE-C (Server-Side Encryption with Customer-Provided Keys)              â”‚
â”‚    â€¢ When you want to manage your own encryption keys                       â”‚
â”‚    â€¢ Keys provided by customer, not stored by AWS                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. CLIENT-SIDE ENCRYPTION:
--------------------------
â€¢ Client encrypts data before sending to Amazon S3
â€¢ Client decrypts data when retrieving from Amazon S3
â€¢ Customer fully manages keys and encryption cycle

IMPORTANT: It's important to understand which ones are for which situation 
for the exam!

================================================================================
SLIDE 3: AMAZON S3 ENCRYPTION â€“ SSE-S3
================================================================================

SSE-S3 Characteristics:
-----------------------
â€¢ Encryption using keys handled, managed, and owned by AWS
â€¢ Object is encrypted SERVER-SIDE
â€¢ Encryption type is AES-256
â€¢ Must set header "x-amz-server-side-encryption": "AES256"
â€¢ ENABLED BY DEFAULT for new buckets & new objects

Architecture:
-------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ğŸ‘¤ User                              Amazon S3                            â”‚
â”‚      â”‚                                                                      â”‚
â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  upload                                                   â”‚
â”‚      â”‚  â”‚ ğŸ“„   â”‚  HTTP(S) + Header     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚      â””â”€â”€â”‚Objectâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚     Object      â”‚                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”˜                       â”‚       â—‹         â”‚                 â”‚
â”‚                                        â”‚       +         â”‚  Encryption    â”‚
â”‚                                        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
â”‚                                        â”‚   â”‚  ğŸ”‘   â”‚     â”‚                 â”‚
â”‚                                        â”‚   â”‚S3 Ownedâ”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                        â”‚   â”‚  Key   â”‚    â”‚    â”‚S3 Bucketâ”‚ â”‚
â”‚                                        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Key Points:
â€¢ AWS manages the entire key lifecycle
â€¢ No additional cost for encryption
â€¢ Simplest encryption option
â€¢ Good for most use cases

================================================================================
SLIDE 4: AMAZON S3 ENCRYPTION â€“ SSE-KMS
================================================================================

SSE-KMS Characteristics:
------------------------
â€¢ Encryption using keys handled and managed by AWS KMS (Key Management Service)
â€¢ KMS advantages: USER CONTROL + AUDIT key usage using CloudTrail
â€¢ Object is encrypted SERVER-SIDE
â€¢ Must set header "x-amz-server-side-encryption": "aws:kms"

Architecture:
-------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ğŸ‘¤ User                              Amazon S3                            â”‚
â”‚      â”‚                                                                      â”‚
â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  upload                                                   â”‚
â”‚      â”‚  â”‚ ğŸ“„   â”‚  HTTP(S) + Header     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚      â””â”€â”€â”‚Objectâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚     Object      â”‚                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”˜                       â”‚       â—‹         â”‚                 â”‚
â”‚                                        â”‚       +         â”‚  Encryption    â”‚
â”‚                                        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
â”‚                                        â”‚  â”‚ AWS KMS  â”‚   â”‚                 â”‚
â”‚                                        â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”  â”‚   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                        â”‚  â”‚ â”‚KMS  â”‚  â”‚   â”‚    â”‚S3 Bucketâ”‚ â”‚
â”‚                                        â”‚  â”‚ â”‚Key ğŸ”‘â”‚ â”‚   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                 â”‚
â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Advantages:
â€¢ Full control over key rotation
â€¢ Audit trail via CloudTrail
â€¢ Can use customer managed keys (CMK)
â€¢ Fine-grained access control via key policies

================================================================================
SLIDE 5: SSE-KMS LIMITATION
================================================================================

KMS Quota Limitations:
----------------------
â€¢ If you use SSE-KMS, you may be IMPACTED by the KMS limits

API Calls:
----------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UPLOAD:                                                                     â”‚
â”‚ â€¢ When you upload, it calls the GenerateDataKey KMS API                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DOWNLOAD:                                                                   â”‚
â”‚ â€¢ When you download, it calls the Decrypt KMS API                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Architecture:
-------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              API call           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚   â”‚ S3 Bucket â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ KMS Key â”‚                â”‚
â”‚   â”‚           â”‚                                 â”‚   ğŸ”‘    â”‚                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚         â–²                                                                   â”‚
â”‚         â”‚ Upload / download                                                 â”‚
â”‚         â”‚ SSE-KMS                                                          â”‚
â”‚         â”‚                                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                                            â”‚
â”‚   â”‚   Users   â”‚                                                            â”‚
â”‚   â”‚  ğŸ‘¥ğŸ‘¥ğŸ‘¥    â”‚                                                            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

KMS Quota Per Second (varies by region):
----------------------------------------
â€¢ 5,500 requests/second
â€¢ 10,000 requests/second
â€¢ 30,000 requests/second
(Based on region)

Solution:
â€¢ You can REQUEST A QUOTA INCREASE using the Service Quotas Console
â€¢ Consider this limitation for high-throughput workloads

================================================================================
SLIDE 6: AMAZON S3 ENCRYPTION â€“ SSE-C
================================================================================

SSE-C Characteristics:
----------------------
â€¢ Server-Side Encryption using keys FULLY MANAGED by the customer outside 
  of AWS
â€¢ Amazon S3 does NOT store the encryption key you provide
â€¢ HTTPS MUST be used (mandatory)
â€¢ Encryption key must be provided in HTTP headers, for EVERY HTTP request made

Architecture:
-------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   ğŸ‘¤ User                              Amazon S3                            â”‚
â”‚      â”‚                                                                      â”‚
â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â” + ğŸ”‘  upload                                              â”‚
â”‚      â”‚  â”‚ ğŸ“„   â”‚       HTTPS ONLY      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚      â””â”€â”€â”‚Objectâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚     Object      â”‚                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”˜  + Key in Header      â”‚       â—‹         â”‚                 â”‚
â”‚                                        â”‚       +         â”‚  Encryption    â”‚
â”‚                                        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
â”‚                                        â”‚   â”‚  ğŸ”‘   â”‚     â”‚                 â”‚
â”‚                                        â”‚   â”‚Client-â”‚     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                                        â”‚   â”‚Providedâ”‚    â”‚    â”‚S3 Bucketâ”‚ â”‚
â”‚                                        â”‚   â”‚  Key   â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                 â”‚
â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Key Points:
â€¢ Customer is responsible for key management
â€¢ Key is discarded after encryption/decryption
â€¢ Must send key with every request
â€¢ Not supported in AWS Console (CLI/SDK only)

================================================================================
SLIDE 7: AMAZON S3 ENCRYPTION â€“ CLIENT-SIDE ENCRYPTION
================================================================================

Client-Side Encryption Characteristics:
---------------------------------------
â€¢ Use client libraries such as Amazon S3 Client-Side Encryption Library
â€¢ Clients must encrypt data themselves BEFORE sending to Amazon S3
â€¢ Clients must decrypt data themselves when RETRIEVING from Amazon S3
â€¢ Customer FULLY MANAGES the keys and encryption cycle

Architecture:
-------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   File        Encryption        File              Amazon S3                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”       (encrypted)                                   â”‚
â”‚  â”‚ ğŸ“„ â”‚   +    â”‚    â”‚    =    â”Œâ”€â”€â”€â”€â”      upload      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â””â”€â”€â”€â”€â”˜        â”‚    â”‚         â”‚ ğŸ”’ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚         â”‚         â”‚
â”‚    +           â””â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”˜     HTTP(S)      â”‚S3 Bucketâ”‚         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”                                               â”‚         â”‚         â”‚
â”‚  â”‚ ğŸ”‘ â”‚                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚  â”‚Clientâ”‚                                                                  â”‚
â”‚  â”‚ Key â”‚                                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”˜                                                                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Key Points:
â€¢ Maximum security - AWS never sees unencrypted data
â€¢ Full control over encryption process
â€¢ More complex implementation
â€¢ Use case: Highly sensitive data with strict compliance requirements

================================================================================
SLIDE 8: AMAZON S3 â€“ ENCRYPTION IN TRANSIT (SSL/TLS)
================================================================================

What is Encryption in Flight?
-----------------------------
â€¢ Encryption in flight is also called SSL/TLS

Amazon S3 Endpoints:
--------------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Amazon S3 exposes TWO endpoints:                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ HTTP Endpoint  â†’ non encrypted                                           â”‚
â”‚ â€¢ HTTPS Endpoint â†’ encryption in flight                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Recommendations:
----------------
â€¢ HTTPS is RECOMMENDED
â€¢ HTTPS is MANDATORY for SSE-C
â€¢ Most clients would use the HTTPS endpoint by default

Why Use HTTPS?
â€¢ Protects data during transmission
â€¢ Prevents man-in-the-middle attacks
â€¢ Required for compliance (PCI-DSS, HIPAA, etc.)

================================================================================
SLIDE 9: AMAZON S3 â€“ FORCE ENCRYPTION IN TRANSIT (aws:SecureTransport)
================================================================================

Using Bucket Policy to Force HTTPS:
-----------------------------------
You can use a bucket policy condition to deny any requests that don't 
use HTTPS.

Architecture:
-------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                              â”‚      Account B          â”‚                   â”‚
â”‚   ğŸ‘¤ User â”€â”€â”€â”€â”€â”€ http â”€â”€â”€â”€â”€â”€â–¶â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                   â”‚
â”‚              âœ— DENIED        â”‚  â”‚    S3 Bucket     â”‚  â”‚                   â”‚
â”‚                              â”‚  â”‚   (my-bucket)    â”‚  â”‚                   â”‚
â”‚                              â”‚  â”‚                  â”‚  â”‚                   â”‚
â”‚   ğŸ‘¤ User â”€â”€â”€â”€â”€â”€ https â”€â”€â”€â”€â”€â–¶â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚                   â”‚
â”‚              âœ“ ALLOWED       â”‚  â”‚  â”‚Bucket      â”‚  â”‚  â”‚                   â”‚
â”‚                              â”‚  â”‚  â”‚Policy      â”‚  â”‚  â”‚                   â”‚
â”‚                              â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                   â”‚
â”‚                              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                   â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Bucket Policy Example (Force HTTPS):
------------------------------------
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Deny",
            "Principal": "*",
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::my-bucket/*",
            "Condition": {
                "Bool": {
                    "aws:SecureTransport": "false"
                }
            }
        }
    ]
}

Key Condition:
â€¢ "aws:SecureTransport": "false" â†’ Deny if NOT using HTTPS
â€¢ This ensures all traffic must use HTTPS

================================================================================
SLIDE 10: AMAZON S3 â€“ DEFAULT ENCRYPTION VS. BUCKET POLICIES
================================================================================

Default Encryption Behavior:
----------------------------
â€¢ SSE-S3 encryption is AUTOMATICALLY applied to new objects stored in 
  S3 bucket
â€¢ This is the default behavior

Forcing Specific Encryption with Bucket Policies:
-------------------------------------------------
Optionally, you can "force encryption" using a bucket policy and refuse 
any API call to PUT an S3 object without encryption headers (SSE-KMS or SSE-C)

Policy 1: Force SSE-KMS Encryption:
-----------------------------------
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Deny",
            "Action": "s3:PutObject",
            "Principal": "*",
            "Resource": "arn:aws:s3:::my-bucket/*",
            "Condition": {
                "StringNotEquals": {
                    "s3:x-amz-server-side-encryption": "aws:kms"
                }
            }
        }
    ]
}

Policy 2: Force SSE-C Encryption:
---------------------------------
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Deny",
            "Action": "s3:PutObject",
            "Principal": "*",
            "Resource": "arn:aws:s3:::my-bucket/*",
            "Condition": {
                "Null": {
                    "s3:x-amz-server-side-encryption-customer-algorithm": "true"
                }
            }
        }
    ]
}

IMPORTANT NOTE:
â€¢ Bucket Policies are evaluated BEFORE "Default Encryption"
â€¢ Policy evaluation happens first, then default encryption applies if 
  no encryption specified

================================================================================
SLIDE 11: WHAT IS CORS?
================================================================================

CORS Definition:
----------------
â€¢ CORS = Cross-Origin Resource Sharing

What is an Origin?
------------------
â€¢ Origin = scheme (protocol) + host (domain) + port
â€¢ Example: https://www.example.com (implied port is 443 for HTTPS, 80 for HTTP)

Same Origin Examples:
---------------------
â€¢ http://example.com/app1 & http://example.com/app2  â†’ SAME ORIGIN
  (Same protocol, same host, same port)

Different Origin Examples:
--------------------------
â€¢ http://www.example.com & http://other.example.com  â†’ DIFFERENT ORIGINS
  (Different hosts)

How CORS Works:
---------------
â€¢ Web Browser based mechanism to allow requests to other origins while 
  visiting the main origin
â€¢ The requests won't be fulfilled unless the other origin ALLOWS for the 
  requests, using CORS Headers
  (Example: Access-Control-Allow-Origin)

================================================================================
SLIDE 12: WHAT IS CORS? (DIAGRAM)
================================================================================

CORS Preflight Request Flow:
----------------------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚                        â”‚        OPTIONS /                   â”‚               â”‚
â”‚                        â”‚  Host: www.other.com               â”‚               â”‚
â”‚                        â”‚  Origin: https://www.example.com   â”‚               â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                     â”‚                                       â”‚
â”‚                                     â–¼  Preflight Request                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Web Server  â”‚â—€â”€â”€HTTPSâ”€â”€â–¶â”‚  Web Browser â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Web Server  â”‚    â”‚
â”‚  â”‚   (Origin)   â”‚  Request  â”‚              â”‚           â”‚(Cross-Origin)â”‚    â”‚
â”‚  â”‚              â”‚           â”‚              â”‚           â”‚              â”‚    â”‚
â”‚  â”‚ https://www  â”‚           â”‚              â”‚           â”‚ https://www  â”‚    â”‚
â”‚  â”‚ .example.com â”‚           â”‚              â”‚           â”‚ .other.com   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â–²                          â”‚            â”‚
â”‚                                     â”‚                          â”‚            â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                        â”‚  Preflight Response:                   â”‚           â”‚
â”‚                        â”‚  Access-Control-Allow-Origin:          â”‚           â”‚
â”‚                        â”‚    https://www.example.com             â”‚           â”‚
â”‚                        â”‚  Access-Control-Allow-Methods:         â”‚           â”‚
â”‚                        â”‚    GET, PUT, DELETE                    â”‚           â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                             â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚                        â”‚  GET /                                 â”‚           â”‚
â”‚                        â”‚  Host: www.other.com                   â”‚           â”‚
â”‚                        â”‚  Origin: https://www.example.com       â”‚           â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                     â”‚                                       â”‚
â”‚               CORS Headers received already by the Origin                   â”‚
â”‚               The Web Browser can make requests                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
SLIDE 13: AMAZON S3 â€“ CORS
================================================================================

S3 CORS Configuration:
----------------------
â€¢ If a client makes a cross-origin request on our S3 bucket, we need to 
  enable the correct CORS headers
â€¢ It's a POPULAR EXAM QUESTION
â€¢ You can allow for a specific origin or for * (all origins)

S3 CORS Use Case:
-----------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   GET /index.html                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              â”‚   Host: my-bucket-html.s3-website    â”‚    S3 Bucket    â”‚ â”‚
â”‚  â”‚ Web Browser  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ (my-bucket-html)â”‚ â”‚
â”‚  â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚Static Website   â”‚ â”‚
â”‚  â”‚              â”‚         index.html                   â”‚    Enabled      â”‚ â”‚
â”‚  â”‚              â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚              â”‚                                                          â”‚
â”‚  â”‚              â”‚   GET /images/coffee.jpg                                 â”‚
â”‚  â”‚              â”‚   Host: my-bucket-assets.s3-website                      â”‚
â”‚  â”‚              â”‚   Origin: my-bucket-html.s3-website  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    S3 Bucket    â”‚ â”‚
â”‚  â”‚              â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚(my-bucket-assets)â”‚ â”‚
â”‚  â”‚              â”‚   Access-Control-Allow-Origin:       â”‚Static Website   â”‚ â”‚
â”‚  â”‚              â”‚   my-bucket-html.s3-website          â”‚    Enabled      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Key Points:
â€¢ The assets bucket must have CORS configuration
â€¢ Must specify allowed origins in CORS configuration
â€¢ Without CORS headers, browser will block cross-origin requests

================================================================================
SLIDE 14: AMAZON S3 â€“ MFA DELETE
================================================================================

What is MFA Delete?
-------------------
â€¢ MFA (Multi-Factor Authentication) â€“ force users to generate a code on a 
  device (usually a mobile phone or hardware) before doing important 
  operations on S3

MFA WILL BE REQUIRED TO:
------------------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Permanently delete an object version                                     â”‚
â”‚ â€¢ Suspend Versioning on the bucket                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MFA WON'T BE REQUIRED TO:
-------------------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Enable Versioning                                                        â”‚
â”‚ â€¢ List deleted versions                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Requirements:
-------------
â€¢ To use MFA Delete, VERSIONING MUST BE ENABLED on the bucket
â€¢ Only the BUCKET OWNER (root account) can enable/disable MFA Delete

Supported MFA Devices:
----------------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ Google Authenticator (mobile app)                                        â”‚
â”‚ â€¢ MFA Hardware Device                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
SLIDE 15: S3 ACCESS LOGS
================================================================================

What are S3 Access Logs?
------------------------
â€¢ For AUDIT purposes, you may want to log all access to S3 buckets
â€¢ Any request made to S3, from any account, authorized or denied, will 
  be logged into another S3 bucket
â€¢ That data can be analyzed using data analysis tools...
â€¢ The target logging bucket must be in the SAME AWS REGION

Architecture:
-------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                ğŸ‘¤                                                           â”‚
â”‚                â”‚                                                            â”‚
â”‚                â”‚ requests                                                   â”‚
â”‚                â–¼                                                            â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚         â”‚  My-bucket   â”‚                                                   â”‚
â”‚         â”‚              â”‚                                                   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                â”‚                                                            â”‚
â”‚                â”‚ Log all requests                                          â”‚
â”‚                â–¼                                                            â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚         â”‚   Logging    â”‚                                                   â”‚
â”‚         â”‚    Bucket    â”‚                                                   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Log Format Reference:
â€¢ https://docs.aws.amazon.com/AmazonS3/latest/dev/LogFormat.html

================================================================================
SLIDE 16: S3 ACCESS LOGS: WARNING
================================================================================

CRITICAL WARNING:
-----------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸  Do NOT set your logging bucket to be the monitored bucket!             â”‚
â”‚                                                                             â”‚
â”‚ It will create a LOGGING LOOP, and your bucket will grow EXPONENTIALLY     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

What Happens:
-------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚      ğŸ‘¤                                                                     â”‚
â”‚       â”‚                                                                     â”‚
â”‚       â”‚ PutObject                                                          â”‚
â”‚       â–¼                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                      â”‚
â”‚  â”‚  App Bucket &    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚  â”‚  Logging Bucket  â”‚               â”‚ Logging loop                         â”‚
â”‚  â”‚                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                      â”‚
â”‚                                                                             â”‚
â”‚  1. User puts object                                                       â”‚
â”‚  2. Log entry created â†’ writes to same bucket                              â”‚
â”‚  3. New log entry for the log write â†’ writes to same bucket               â”‚
â”‚  4. Another log entry... (infinite loop!)                                  â”‚
â”‚                                                                             â”‚
â”‚  âš ï¸ Do not try this at home! ğŸ˜Š                                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Best Practice:
â€¢ ALWAYS use a SEPARATE bucket for logging
â€¢ Logging bucket should have its own lifecycle policies to manage log files

================================================================================
SLIDE 17: AMAZON S3 â€“ PRE-SIGNED URLS
================================================================================

What are Pre-Signed URLs?
-------------------------
â€¢ Generate pre-signed URLs using the S3 Console, AWS CLI or SDK
â€¢ URLs that provide temporary access to S3 objects

URL Expiration:
---------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ S3 Console:                                                                 â”‚
â”‚ â€¢ 1 min up to 720 mins (12 hours)                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ AWS CLI:                                                                    â”‚
â”‚ â€¢ Configure expiration with --expires-in parameter in seconds              â”‚
â”‚ â€¢ Default: 3600 secs (1 hour)                                              â”‚
â”‚ â€¢ Max: 604800 secs (~168 hours / 7 days)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Permission Inheritance:
-----------------------
â€¢ Users given a pre-signed URL INHERIT the permissions of the user that 
  generated the URL for GET / PUT operations

Architecture:
-------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     generate         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚   Owner   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶   â”‚    ğŸ”—       â”‚                       â”‚
â”‚   â”‚    ğŸ‘¤     â”‚   pre-signed URL     â”‚    URL      â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                             â”‚                               â”‚
â”‚                                             â–¼                               â”‚
â”‚                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                                      â”‚  S3 Bucket  â”‚                       â”‚
â”‚                                      â”‚  (Private)  â”‚                       â”‚
â”‚                                      â”‚             â”‚                       â”‚
â”‚                                      â”‚    â”Œâ”€â”€â”€â”€â”   â”‚                       â”‚
â”‚                                      â”‚    â”‚ ğŸ“„ â”‚   â”‚                       â”‚
â”‚                                      â”‚    â””â”€â”€â”€â”€â”˜   â”‚                       â”‚
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                             â–²                               â”‚
â”‚                                             â”‚                               â”‚
â”‚                                      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                                      â”‚    ğŸ”—       â”‚                       â”‚
â”‚                                      â”‚    URL      â”‚                       â”‚
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                             â”‚                               â”‚
â”‚                                             â–¼                               â”‚
â”‚                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                                      â”‚   User    â”‚                         â”‚
â”‚                                      â”‚    ğŸ‘¤     â”‚                         â”‚
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use Case Examples:
------------------
â€¢ Allow only logged-in users to download a premium video from your S3 bucket
â€¢ Allow an ever-changing list of users to download files by generating 
  URLs dynamically
â€¢ Allow temporarily a user to upload a file to a precise location in 
  your S3 bucket

================================================================================
SLIDE 18: S3 GLACIER VAULT LOCK
================================================================================

What is Glacier Vault Lock?
---------------------------
â€¢ Adopt a WORM (Write Once Read Many) model
â€¢ Create a Vault Lock Policy
â€¢ Lock the policy for future edits (can no longer be changed or deleted)
â€¢ Helpful for COMPLIANCE and DATA RETENTION

Architecture:
-------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚                    â”‚   Object    â”‚                                         â”‚
â”‚                    â”‚      â—‹      â”‚                                         â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                           â”‚                                                 â”‚
â”‚                           â–¼                                                 â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚                    â”‚                     â”‚                                 â”‚
â”‚                    â”‚  ğŸ”’ Vault Lock      â”‚                                 â”‚
â”‚                    â”‚     Policy          â”‚                                 â”‚
â”‚                    â”‚                     â”‚                                 â”‚
â”‚                    â”‚  Object can't       â”‚                                 â”‚
â”‚                    â”‚  be deleted         â”‚                                 â”‚
â”‚                    â”‚                     â”‚                                 â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Key Points:
â€¢ Once locked, the policy cannot be modified
â€¢ Used for regulatory compliance
â€¢ Applies to S3 Glacier vaults

================================================================================
SLIDE 19: S3 OBJECT LOCK (VERSIONING MUST BE ENABLED)
================================================================================

What is S3 Object Lock?
-----------------------
â€¢ Adopt a WORM (Write Once Read Many) model
â€¢ Block an object version deletion for a specified amount of time
â€¢ VERSIONING MUST BE ENABLED

Retention Modes:
----------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RETENTION MODE - COMPLIANCE:                                               â”‚
â”‚ â€¢ Object versions CAN'T be overwritten or deleted by ANY user,            â”‚
â”‚   INCLUDING the root user                                                  â”‚
â”‚ â€¢ Objects retention modes CAN'T be changed, and retention periods         â”‚
â”‚   CAN'T be shortened                                                       â”‚
â”‚ â€¢ Most restrictive mode                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RETENTION MODE - GOVERNANCE:                                               â”‚
â”‚ â€¢ MOST users can't overwrite or delete an object version or alter its     â”‚
â”‚   lock settings                                                            â”‚
â”‚ â€¢ SOME users have special permissions to change the retention or          â”‚
â”‚   delete the object                                                        â”‚
â”‚ â€¢ More flexible than Compliance mode                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Retention Period:
-----------------
â€¢ Protect the object for a FIXED PERIOD, it can be EXTENDED

Legal Hold:
-----------
â€¢ Protect the object INDEFINITELY, independent from retention period
â€¢ Can be freely placed and removed using the s3:PutObjectLegalHold 
  IAM permission

Comparison:
-----------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Feature           â”‚ Compliance Mode    â”‚ Governance Mode   â”‚ Legal Hold    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Root can delete   â”‚ No                 â”‚ With permission   â”‚ With perm.    â”‚
â”‚ Period adjustable â”‚ Cannot shorten     â”‚ With permission   â”‚ Indefinite    â”‚
â”‚ Use case          â”‚ Regulatory         â”‚ Internal policy   â”‚ Investigationsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
SLIDE 20: S3 â€“ ACCESS POINTS
================================================================================

What are S3 Access Points?
--------------------------
â€¢ Access Points SIMPLIFY security management for S3 Buckets
â€¢ Each Access Point has:
  - Its own DNS name (Internet Origin or VPC Origin)
  - An access point policy (similar to bucket policy) â€“ manage security 
    at scale

Architecture:
-------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  Users             Policy                Access              S3 Bucket     â”‚
â”‚ (Finance)    Grant R/W to              Point                               â”‚
â”‚   ğŸ‘¥ğŸ‘¥ğŸ‘¥  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚           /finance prefix      â”‚    Finance      â”‚                         â”‚
â”‚                                â”‚  Access Point   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  Users             Policy      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   Simple       â”‚  â”‚
â”‚ (Sales)     Grant R/W to               â”‚             â”‚   Bucket       â”‚  â”‚
â”‚   ğŸ‘¥ğŸ‘¥ğŸ‘¥  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   Policy       â”‚  â”‚
â”‚           /sales prefix        â”‚     Sales       â”‚â”€â”€â”€â–¶â”‚                â”‚  â”‚
â”‚                                â”‚  Access Point   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  Users             Policy      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚/finance/ â”‚  â”‚  â”‚
â”‚ (Analytics)  Grant R to                â”‚             â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚   ğŸ‘¥ğŸ‘¥ğŸ‘¥  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚/sales/   â”‚  â”‚  â”‚
â”‚           entire bucket        â”‚   Analytics     â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚                                â”‚  Access Point   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Benefits:
â€¢ Simplify managing access to shared datasets
â€¢ Each access point can have its own policy
â€¢ Easier to manage than one complex bucket policy
â€¢ Scale permissions management

================================================================================
SLIDE 21: S3 â€“ ACCESS POINTS â€“ VPC ORIGIN
================================================================================

VPC Origin Access Points:
-------------------------
â€¢ We can define the access point to be accessible ONLY FROM WITHIN the VPC
â€¢ You must create a VPC Endpoint to access the Access Point 
  (Gateway or Interface Endpoint)
â€¢ The VPC Endpoint Policy must allow access to the target bucket and 
  Access Point

Architecture:
-------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                              VPC                                       â”‚â”‚
â”‚  â”‚                                                                        â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚    EC2     â”‚      â”‚  VPC Endpoint  â”‚      â”‚   Access Point     â”‚   â”‚â”‚
â”‚  â”‚  â”‚  Instance  â”‚â”€â”€â”€â”€â”€â–¶â”‚                â”‚â”€â”€â”€â”€â”€â–¶â”‚   VPC Origin       â”‚   â”‚â”‚
â”‚  â”‚  â”‚            â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚                    â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚ Endpoint â”‚  â”‚      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚â”‚
â”‚  â”‚                      â”‚  â”‚ Policy   â”‚  â”‚      â”‚  â”‚Access Point  â”‚  â”‚   â”‚â”‚
â”‚  â”‚                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚  â”‚   Policy     â”‚  â”‚   â”‚â”‚
â”‚  â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚â”‚
â”‚  â”‚                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                           â”‚                â”‚
â”‚                                                           â–¼                â”‚
â”‚                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚                                                    â”‚  S3 Bucket  â”‚         â”‚
â”‚                                                    â”‚             â”‚         â”‚
â”‚                                                    â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚         â”‚
â”‚                                                    â”‚â”‚ Bucket    â”‚â”‚         â”‚
â”‚                                                    â”‚â”‚ Policy    â”‚â”‚         â”‚
â”‚                                                    â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚         â”‚
â”‚                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VPC Endpoint Policy Example:
----------------------------
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Principal": "*",
            "Action": [
                "s3:GetObject"
            ],
            "Effect": "Allow",
            "Resource": [
                "arn:aws:s3:::awsexamplebucket1/*",
                "arn:aws:s3:us-west-2:123456789012:accesspoint/example-vpc-ap/object/*"
            ]
        }
    ]
}

================================================================================
SLIDE 22: S3 OBJECT LAMBDA
================================================================================

What is S3 Object Lambda?
-------------------------
â€¢ Use AWS Lambda Functions to CHANGE THE OBJECT before it is retrieved 
  by the caller application
â€¢ Only ONE S3 bucket is needed, on top of which we create S3 Access Point 
  and S3 Object Lambda Access Points

Use Cases:
----------
â€¢ REDACTING personally identifiable information for analytics or 
  non-production environments
â€¢ CONVERTING across data formats, such as converting XML to JSON
â€¢ RESIZING and WATERMARKING images on the fly using caller-specific 
  details, such as the user who requested the object

Architecture:
-------------
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                          AWS Cloud                          â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Original     â”‚                                        â”‚  S3 Bucket  â”‚ â”‚
â”‚  â”‚    Object      â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚      ğŸ“„        â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                â”‚         E-Commerce Application                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚   â”‚
â”‚                                                            Supporting  â”‚   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          S3 Access    â”‚   â”‚
â”‚  â”‚   Redacted     â”‚     â”‚ S3 Object Lambda    â”‚           Point       â”‚   â”‚
â”‚  â”‚    Object      â”‚â—€â”€â”€â”€â”€â”‚   Access Point      â”‚â—€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚      ğŸ“„        â”‚     â”‚         ğŸ”—          â”‚     â”‚                     â”‚
â”‚  â”‚ Analytics App  â”‚     â”‚                     â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  Redacting Lambda   â”‚     â”‚  â”‚   Redacting     â”‚â”‚
â”‚                         â”‚       Function ğŸ”§   â”‚â—€â”€â”€â”€â”€â”˜  â”‚   Lambda        â”‚â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   Function      â”‚â”‚
â”‚  â”‚   Enriched     â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”‚    Object      â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚      ğŸ“„        â”‚â—€â”€â”€â”€â”€â”‚ S3 Object Lambda    â”‚                           â”‚
â”‚  â”‚ Marketing App  â”‚     â”‚   Access Point      â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚         ğŸ”—          â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”‚   Enriching     â”‚â”‚
â”‚                         â”‚                     â”‚        â”‚   Lambda        â”‚â”‚
â”‚                         â”‚ Enriching Lambda    â”‚        â”‚   Function      â”‚â”‚
â”‚                         â”‚      Function ğŸ”§    â”‚        â”‚                 â”‚â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  Customer       â”‚â”‚
â”‚                                                        â”‚  Loyalty DB     â”‚â”‚
â”‚                                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

How It Works:
1. Application requests object through S3 Object Lambda Access Point
2. Lambda function is invoked
3. Lambda retrieves original object from S3 Access Point
4. Lambda transforms the object (redact, enrich, convert, etc.)
5. Transformed object is returned to the application

Benefits:
â€¢ No need to maintain multiple versions of data
â€¢ On-the-fly transformation
â€¢ Cost-effective
â€¢ Different views for different applications from same source data

================================================================================
                              END OF GUIDE
================================================================================

Summary - S3 Security Complete Guide:
-------------------------------------

ENCRYPTION AT REST:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Method     â”‚ Key Management      â”‚ Header                    â”‚ Use Case    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SSE-S3     â”‚ AWS Managed         â”‚ x-amz-...: AES256        â”‚ Default     â”‚
â”‚ SSE-KMS    â”‚ AWS KMS             â”‚ x-amz-...: aws:kms       â”‚ Audit/Ctrl  â”‚
â”‚ SSE-C      â”‚ Customer Managed    â”‚ Key in header            â”‚ Own keys    â”‚
â”‚ Client-Sideâ”‚ Customer Managed    â”‚ N/A (encrypted before)   â”‚ Max securityâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ENCRYPTION IN TRANSIT:
â€¢ Always use HTTPS (mandatory for SSE-C)
â€¢ Use aws:SecureTransport condition to force HTTPS

ACCESS CONTROL:
â€¢ Bucket Policies - evaluated before default encryption
â€¢ CORS - for cross-origin requests
â€¢ MFA Delete - for sensitive delete operations
â€¢ Pre-Signed URLs - temporary access
â€¢ Access Points - simplified security management

DATA PROTECTION:
â€¢ Glacier Vault Lock - WORM for Glacier
â€¢ S3 Object Lock - WORM for S3 (Compliance/Governance modes)
â€¢ Legal Hold - indefinite protection

ADVANCED FEATURES:
â€¢ S3 Access Logs - audit all requests
â€¢ VPC Origin Access Points - private access
â€¢ S3 Object Lambda - transform objects on retrieval

Key Exam Tips:
â€¢ SSE-S3 is enabled by DEFAULT
â€¢ SSE-KMS has quota limitations (affects high-throughput)
â€¢ SSE-C requires HTTPS
â€¢ Bucket policies are evaluated BEFORE default encryption
â€¢ Object Lock requires VERSIONING
â€¢ Only ROOT ACCOUNT can enable MFA Delete
